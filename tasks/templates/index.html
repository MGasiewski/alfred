<!doctype html>
<html lang="en">
  {% include "head.html" %}
  <body>
    {% include "header.html" %}
    <main role="main" class="container">
	  <section class="jumbotron text-center">
        <div class="container">
          <h1 class="jumbotron-heading">Tasks</h1>
          <p class="lead text-muted">Something short and leading about the collection belowâ€”its contents, the creator, etc. Make it short and sweet, but not too short so folks don't simply skip over it entirely.</p>
        </div>
      </section>
    <div class="container">
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Task</th>
            <th>Due Date</th>
            <th>Complete?</th>
			<th>Actions</th>
	      </tr>
        </thead>
           
	    {% if tasks_list %}
        <tbody>
        {% for task in tasks_list %} 
          <tr>
            <td>{{ task.content }}</td>
            <td>{{ task.due_date }}</td>
            <td>{{ task.completed }}</td>
			<td>
        <button type="button" class="btn btn-sm btn-outline-secondary" id="edit_button_{{ task.id }}" data-toggle="modal" data-target="#edit_modal_{{ task.id }}"><i class="fas fa-pencil-alt"></i></button>
			  <button type="button" class="btn btn-sm btn-outline-secondary" id="complete_button_{{ task.id }}"><i class="fas fa-check" ></i></button>
			  <button type="button" class="btn btn-sm btn-outline-secondary" id="delete_button_{{ task.id }}" data-toggle="modal" data-target="#delete_modal_{{ task.id }}"><i class="fas fa-trash-alt"></i></button>
			</td>
          </tr>
        {% endfor %}
        </tbody>
      {% else %}
      <p>No tasks available.</p>
      {% endif %}
	  </table>
	  <a href="#" class="btn btn-primary my-2" id="add_task_button">Add Task</a>
    </div>
    </main>
	{% include "footer.html" %}
  <script>
  var tasks = [];
  {% for task in tasks_list %}
    tasks.push( new Task({{ task.id }}, "{{ task.content }}", "{{ task.created_date }}", "{{ task.due_date }}", "{{ task.completed }}", "{{ task.deleted }}" ));
  {% endfor %}
  </script>
  </body>
  {% for task in tasks_list %}
    <div class="modal fade" id="edit_modal_{{ task.id }}" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Edit task</h4>
        </div>
        <div class="modal-body">
          Content:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          <input type="text" value="{{ task.content }}"/><br><br>
          Due Date:&nbsp;&nbsp;&nbsp;&nbsp;
          <input type="text" class="datepicker" value="{{ task.due_date }}"/><br><br>
          Completed:&nbsp;
          <input type="text" value="{{ task.completed }}"/>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Update</button>
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>


    <div class="modal fade" id="delete_modal_{{ task.id }}" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Delete?</h4>
        </div>
        <div class="modal-body">
          <h5>Are you sure you want to delete this task?</h5>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Delete</button>
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>
  {% endfor %}
  <script>
  $(function(){
    $(".datepicker").datepicker();
  });
  </script>
</html>
